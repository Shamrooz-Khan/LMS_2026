{% extends 'core/base.html' %}
{% load static %}

{% block title %}Student Dashboard{% endblock %}

{% block content %}
<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
    }

    .topbar {
        height: 80px;
        background: linear-gradient(to right, #f44336, #ff5722);
        color: white;
        display: flex;
        align-items: center;
        padding-left: 270px;
        font-size: 20px;
        font-weight: bold;
    }

    .sidebar {
        height: 100vh;
        width: 250px;
        background: #eeeeee;
        padding: 20px;
        position: fixed;
        left: 0;
        top: 0;
        overflow-y: auto;
    }

    .sidebar .profile {
        background: linear-gradient(to right, #e53935, #d81b60);
        color: white;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 30px;
        font-size: 14px;
    }

    .sidebar .profile img {
        border-radius: 50%;
        width: 50px;
        float: left;
        margin-right: 10px;
    }

    .sidebar a {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: #333;
        padding: 10px 0;
    }

    .sidebar a i {
        margin-right: 10px;
    }

    .main-content {
        margin-left: 270px;
        padding: 30px;
        background: #f5f5f5;
        min-height: 100vh;
    }

    .card-box {
        background: #ffc107;
        padding: 20px;
        margin-bottom: 15px;
        border-radius: 5px;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        position: relative;
        cursor: pointer;
    }

    .badge-new {
        background-color: #e53935;
        color: white;
        font-size: 11px;
        padding: 2px 6px;
        border-radius: 3px;
        position: absolute;
        top: 10px;
        right: 10px;
    }
</style>

<!-- TOP NAVBAR -->
<div class="topbar">
    Learning Management System
</div>

<!-- SIDEBAR -->
<div class="sidebar">
    <div class="profile">
        <img src="{% static 'default-avatar.png' %}" alt="Profile">
        <strong>{{ user.username }} ({{ user.role }})</strong><br>
        {{ user.email }}
    </div>
    <a href="{% url 'available_courses' %}">Enroll in Courses</a>  
    <a href="{% url 'my_courses' %}">Enrolled Courses</a>
    <a href="{% url 'view_attendance' %}"> Attendance </a>
    <a href="#"><i class="material-icons">assessment</i> Student Result</a>
    <a href="#"><i class="material-icons">assignment</i> Assignment(s)</a>
    <a href="#"><i class="material-icons">menu_book</i> Course Book(s)</a>
    <a href="#"><i class="material-icons">feedback</i> Feedback</a>
    <a href="{% url 'logout' %}"><i class="material-icons">logout</i> Logout</a>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">
    <div class="card-box">
        Subject wise Videos
        <span class="badge-new">New</span>
    </div>
     <!-- Notifications Start -->
    <h4 class="mt-4">Recent Notifications</h4>
    <ul class="list-group">
        {% for note in request.user.notification_set.all|dictsortreversed:"created_at"|slice:":5" %}
            <li class="list-group-item small">
                {{ note.message }}<br>
                <small class="text-muted">{{ note.created_at|date:"d M Y H:i" }}</small>
            </li>
        {% empty %}
            <li class="list-group-item">No recent notifications.</li>
        {% endfor %}
    </ul>
    <a href="{% url 'notifications' %}" class="btn btn-link mt-2">View all</a>
    <!-- Notifications End -->
</div>
{% endblock %}
